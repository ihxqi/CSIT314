<!DOCTYPE html>
<html>
    <head>
		<title>Tickets</title>
        <meta charset = "utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Movie listing</title>
        <link rel ="stylesheet" href = "styles.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,300;0,400;0,800;1,100;1,400&display=swap" rel="stylesheet">
    </head>
	
	<style>
		.search-results 
		{
			margin-top: 20px;
		}
		
		.box 
		{
			display: block;
		}
		
		.hidden
		{
			display: none;
		}
	</style>
<body>
	<div class="white-box">
        <section>
            <div class="container1">
                <div class="logo">
                    <img src="Images/cinemethologo.jpeg">
                </div>
    
                <div class="topnav">
					<a href="#" onclick="logout()">LOG OUT</a>
					<a href="loyaltyRewards.html">LOYALTY REWARDS</a>					
					<a href="tickets.html">TICKETS</a>
					<a href="cinemaRooms.html">CINEMA ROOMS</a>  
					<a href="movies.html">MOVIES</a>    
					<a href="f&b.html">F&B</a>                				
					<a class="active" href="cinemaManager.html">HOME</a>
                </div>
            </div> 
        </section>

        <hr>
        <br><br>
		<div class="search-container">			
				<input type="text" id="search" placeholder="Search by customer profile">
				<div class="search-results"></div>
		</div>
		<table id="ticketTable" border="1">
		<tr>
			<th>Customer Profiles</th>
			<th>Prices</th>
			<th>Actions</th>
		</tr>
		<tr>
			<td contenteditable="true">Adult</td>
			<td contenteditable="true">$12.50</td>
			<td>
				<button onclick="suspend(this)">Suspend</button>
				<button onclick="activate(this)" disabled>Activate</button>
			</td>
		</tr>
		<tr>
			<td contenteditable="true">Student</td>
			<td contenteditable="true">$8.50</td>
			<td>
				<button onclick="suspend(this)">Suspend</button>
				<button onclick="activate(this)" disabled>Activate</button>
			</td>		
		</tr>
		<tr>
			<td contenteditable="true">Child</td>
			<td contenteditable="true">$6.50</td>
			<td>
				<button onclick="suspend(this)">Suspend</button>
				<button onclick="activate(this)" disabled>Activate</button>
			</td>
		</tr>
		<tr>
			<td contenteditable="true">Senior Citizen</td>
			<td contenteditable="true">$4.50</td>
			<td>
				<button onclick="suspend(this)">Suspend</button>
				<button onclick="activate(this)" disabled>Activate</button>
			</td>
		</tr>
		</table><br>
		
		<button onclick="addTicket()">Add Ticket</button>
		<button onclick="updateTicket()">Update Ticket</button>		
	</div>
	
	<script>
		document.getElementById('search').addEventListener('input', function(e) 
		{
			var searchVal = e.target.value.toLowerCase();
			var table = document.getElementById('ticketTable');

			for (var i = 1, row; row = table.rows[i]; i++) 
			{
				var ticket = row.cells[0].innerText;				

				if (ticket.toLowerCase().includes(searchVal)) 
				{
					row.style.display = "";
				}	 
				else 
				{
					row.style.display = ('none');
				}
			}
		});
	
		function addTicket() 
		{
			var table = document.getElementById('ticketTable');
			var row = table.insertRow(-1);

			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);

			cell1.contentEditable = "true";
			cell2.contentEditable = "true";
			cell3.innerHTML = '<button onclick="suspend(this)">Suspend</button><button onclick="activate(this)" disabled>Activate</button>';

			cell1.innerHTML = "New Ticket";
			cell2.innerHTML = "$0";
		}
		
		function suspend(btn)
		{
			var row = btn.parentNode.parentNode;
			row.style.backgroundColor = 'grey'; // suspended
			row.cells[0].contentEditable = "false";  // Make cells uneditable
			row.cells[1].contentEditable = "false";
			btn.disabled = true;  // Disable the suspend button

			var activateButton = btn.nextElementSibling;
			if (activateButton) 
			{
				activateButton.disabled = false;  // Enable the activate button
			}
		}
		
		function activate(btn) 
		{
		  var row = btn.parentNode.parentNode;
		  row.style.backgroundColor = '';  // Change color back to original
		  row.cells[0].contentEditable = "true";  // Make cells editable
		  row.cells[1].contentEditable = "true";
		  btn.disabled = true;  // Disable the activate button

			var suspendButton = btn.previousElementSibling;
			if (suspendButton) 
			{
				suspendButton.disabled = false;  // Enable the suspend button
			}
		}
	
		function update() 
		{
			var table = document.getElementById('ticketTable');
			for (var i = 1, row; row = table.rows[i]; i++) 
			{
				var ticket = row.cells[0].innerText;
				var price = row.cells[1].innerText;
				console.log('Ticket: ' + ticket + ', Price: ' + price);
			}
		}
		
		function logout() 
		{
			// Code to handle logout
			console.log("Logged out");
			window.location.href = 'index.html'; // redirect to login page after logout
		}
	</script>
</body>

</html>